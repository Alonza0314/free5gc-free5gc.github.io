<!DOCTYPE html>
<html lang="en" >

  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


<meta property="og:title" content="" />
<meta property="og:description" content="SBI Configuration There are registerIP and bindingIP design on every NF&rsquo;s sbi interface.
This is due to some orchestration, such as Kubernets or OpenStack, has the design of service IP mapping.
Use Kubernets as an example. K8S has the service type that enable users to define the service IP outside the pod." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.free5gc.org/installations/stage-3-configuration/" />




<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content=""/>
<meta name="twitter:description" content="SBI Configuration There are registerIP and bindingIP design on every NF&rsquo;s sbi interface.
This is due to some orchestration, such as Kubernets or OpenStack, has the design of service IP mapping.
Use Kubernets as an example. K8S has the service type that enable users to define the service IP outside the pod."/>
<meta name="generator" content="Hugo 0.80.0" />

    
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "headline": "",
  "url": "https://www.free5gc.org/installations/stage-3-configuration/",
  "wordCount": "251",
  "datePublished": "0001-01-01T00:00:00+00:00",
  "author": {
    "@type": "Person",
    "name": "free5GC.ofg"
  }
}
</script>



    <link rel="canonical" href="https://www.free5gc.org/installations/stage-3-configuration/">

    <title> | free5GC</title>

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">

    <!-- combined, minified CSS -->
    
    <link href="https://www.free5gc.org/css/bootstrap-icons.0799fcdcc0b7a1f7165b6d7dd1ea2280de895281badebe34845b3691a0910b0a.css" rel="stylesheet">
    
    <link href="https://www.free5gc.org/css/style.d8d3ca46b31f5e445f452e8cbf40915b1bbc4cd870640af474cc10b8b6dfaa22.css" rel="stylesheet">

    <!-- minified base javascript -->
    
    <script defer src="https://www.free5gc.org/js/base.6d4e3026ad8b475550ec72166dad66ce7e1ca14bc425122ad42fef1d9ca82f67.js" crossorigin="anonymous"></script>

    

  </head>

  <body>

    
    <header class="d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white border-bottom shadow-sm">
      <p class="h5 my-0 me-md-auto fw-normal">
        <a class="nav-link " href="https://www.free5gc.org">
          <img src="/img/free5GC.png" width="217" height="51">
        </a>
      </p>
      <nav class="btn-group" role="group" aria-label="Basic outlined example">
          
          <a class="btn btn-outline-primary"
             href="/" title="Home">Home</a>
          
        
          
          <a class="btn btn-outline-primary"
             href="/roadmap/" title="Roadmap">Roadmap</a>
          
        
          
          <div id="btn-group-install" class="btn-group" role="group">
            <button type="button"
                    class="btn btn-outline-primary dropdown-toggle active"
                    data-bs-toggle="dropdown" aria-expanded="false">
              Installations
            </button>
            <ul class="dropdown-menu" aria-labelledby="btn-group-install">
              
              <li><a class="dropdown-item"
                     
                     title="Stage 1: Cluster"
                     href="/installations/stage-1-cluster/">Stage 1: Cluster</a></li>
              
              <li><a class="dropdown-item"
                     
                     title="Stage 1: All-in-one"
                     href="/installations/stage-1-all-in-one/">Stage 1: All-in-one</a></li>
              
              <li><a class="dropdown-item"
                     
                     title="Stage 2: Standalone 5G"
                     href="/installations/stage-2-standalone-5g/">Stage 2: Standalone 5G</a></li>
              
              <li><a class="dropdown-item"
                     
                     title="Stage 3: free5GC"
                     href="/installations/stage-3/">Stage 3: free5GC</a></li>
              
            </ul>
          </div>
          
        
          
          <a class="btn btn-outline-primary"
             href="/membership/" title="Membership">Membership</a>
          
        
          
          <a class="btn btn-outline-primary"
             href="/contactus/" title="Contact Us">Contact Us</a>
          
        
          
          <div id="btn-group-more" class="btn-group" role="group">
            <button type="button"
                    class="btn btn-outline-primary dropdown-toggle"
                    data-bs-toggle="dropdown" aria-expanded="false">
              More
            </button>
            <ul class="dropdown-menu" aria-labelledby="btn-group-more">
              
              <li><a class="dropdown-item"
                     target="_blank"
                     title="Download"
                     href="https://github.com/free5gc/free5gc">Download</a></li>
              
                     <li>
                      <a
                        class="dropdown-item"
                        target="_blank"
                        title="Youtube"
                        href="https://www.youtube.com/channel/UCywP5Acj50GlhSxZTJXlqtw/videos"
                        >free5GC YouTube Channel</a
                      >
                    </li>
        
                    <li>
                      <a class="dropdown-item" title="History" href="/otherVideo/"
                        >Other Videos</a
                      >
                    </li>
              
              <li><a class="dropdown-item"
                     target="_blank"
                     title="free5GC Forum"
                     href="https://forum.free5gc.org/">free5GC Forum</a></li>
              
              <li><a class="dropdown-item"
                     
                     title="History"
                     href="/history/">History</a></li>
              
            </ul>
          </div>
          
        
      </nav>
    </header>
    

    <div class="container-fluid mx-auto" style="max-width: 960px;">

      


<article class="blog-post">
  <header>
    <h2 class="blog-post-title" dir="auto"><a href="https://www.free5gc.org/installations/stage-3-configuration/"></a></h2>
    <p class="blog-post-meta">

</p>
  </header>
  <h2 id="sbi-configuration">SBI Configuration</h2>
<p>There are registerIP and bindingIP design on every NF&rsquo;s sbi interface.</p>
<p><img src="https://i.imgur.com/58di1vG.png" alt="SBI interface"></p>
<p>This is due to some orchestration, such as Kubernets or OpenStack, has the design of service IP mapping.</p>
<p><img src="https://i.imgur.com/pvimSfV.png" alt="Service IP Mapping"></p>
<p>Use Kubernets as an example. K8S has the service type that enable users to define the service IP outside the pod. But the service IP may be different from the IP assigned inside the pod. Therefore, if we register the binding IP inside the pod to NRF, NRF cannot know which service IP outside the pod has attached. As the result, we need to separate registerIP from bindingIP in this scenario.</p>
<p>If you are not sure what IP you should set, just configure it as the same IP address.</p>
<h2 id="sample-configuration">Sample configuration</h2>
<p>We provide a sample config to connect to outer ran under <code>/sample/ran_attach_config/</code>. The architecture is as following.</p>
<p><img src="https://i.imgur.com/xNaxBHz.png" alt="free5GC sample config"></p>
<p>As the result, user&rsquo;s RAN IP must set to 192.168.0.0/24 subnet or let the routing route to this subnet.</p>
<p>Notice: If user wants to use the setting, aware to set 192.168.0.1 to your host as well.</p>
<h2 id="smf-configuration">SMF Configuration</h2>
<h3 id="a-configure-smf-with-s-nssai">A. Configure SMF with S-NSSAI</h3>
<ol>
<li>Configure NF Registration SMF S-NSSAI in <code>smfcfg.conf</code></li>
</ol>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-yaml" data-lang="yaml"><span style="color:#062873;font-weight:bold">snssai_info</span>:<span style="color:#bbb">
</span><span style="color:#bbb"></span>- <span style="color:#062873;font-weight:bold">sNssai</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#062873;font-weight:bold">sst</span>:<span style="color:#bbb"> </span><span style="color:#40a070">1</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#062873;font-weight:bold">sd</span>:<span style="color:#bbb"> </span><span style="color:#40a070">010203</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#062873;font-weight:bold">dnnSmfInfoList</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span>- <span style="color:#062873;font-weight:bold">dnn</span>:<span style="color:#bbb"> </span>internet<span style="color:#bbb">
</span><span style="color:#bbb"></span>- <span style="color:#062873;font-weight:bold">sNssai</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#062873;font-weight:bold">sst</span>:<span style="color:#bbb"> </span><span style="color:#40a070">1</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#062873;font-weight:bold">sd</span>:<span style="color:#bbb"> </span><span style="color:#40a070">112233</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#062873;font-weight:bold">dnnSmfInfoList</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span>- <span style="color:#062873;font-weight:bold">dnn</span>:<span style="color:#bbb"> </span>internet<span style="color:#bbb">
</span></code></pre></div><h3 id="b-configure-uplink-classifier-ulcl-information-in-smf">B. Configure Uplink Classifier (ULCL) information in SMF</h3>
<ol>
<li>Enable ULCL feature in <code>smfcfg.conf</code></li>
</ol>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-yaml" data-lang="yaml"><span style="color:#bbb">    </span>ulcl:true<span style="color:#bbb">
</span></code></pre></div><ol start="2">
<li>Configure UE routing path in <code>uerouting.yaml</code></li>
</ol>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-yaml" data-lang="yaml"><span style="color:#062873;font-weight:bold">ueRoutingInfo</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>- <span style="color:#062873;font-weight:bold">SUPI</span>:<span style="color:#bbb"> </span>imsi-2089300007487<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#062873;font-weight:bold">AN</span>:<span style="color:#bbb"> </span><span style="color:#40a070">10.200.200.101</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#062873;font-weight:bold">PathList</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>- <span style="color:#062873;font-weight:bold">DestinationIP</span>:<span style="color:#bbb"> </span><span style="color:#40a070">60.60.0.101</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#062873;font-weight:bold">DestinationPort</span>:<span style="color:#bbb"> </span><span style="color:#40a070">8888</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#062873;font-weight:bold">UPF</span>:<span style="color:#bbb"> </span><span style="color:#007020">!!seq</span><span style="color:#bbb">
</span><span style="color:#bbb">          </span>- BranchingUPF<span style="color:#bbb">
</span><span style="color:#bbb">          </span>- AnchorUPF1<span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- <span style="color:#062873;font-weight:bold">DestinationIP</span>:<span style="color:#bbb"> </span><span style="color:#40a070">60.60.0.103</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#062873;font-weight:bold">DestinationPort</span>:<span style="color:#bbb"> </span><span style="color:#40a070">9999</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#062873;font-weight:bold">UPF</span>:<span style="color:#bbb"> </span><span style="color:#007020">!!seq</span><span style="color:#bbb">
</span><span style="color:#bbb">          </span>- BranchingUPF<span style="color:#bbb">
</span><span style="color:#bbb">          </span>- AnchorUPF2<span style="color:#bbb">
</span></code></pre></div><ul>
<li>DestinationIP and DestinationPort will be the packet  destination.</li>
<li>UPF field will be the packet datapath when it match the destination above.</li>
</ul>
<p><em><strong>For more detail of SMF config, please refer to <a href="https://github.com/free5gc/free5gc/wiki/SMF-Config">here</a>.</strong></em></p>


  

  
  <hr>
  <footer>

  
    <section>
    <h4></h4>
    <nav class="nav sharing-icons">
      <a class="nav-item" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.free5gc.org%2finstallations%2fstage-3-configuration%2f" title="Share on Facebook"><span class="fab fa-facebook-f fa-2x" aria-hidden="true"></span></a>
      <a class="nav-item" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fwww.free5gc.org%2finstallations%2fstage-3-configuration%2f" title="Share on LinkedIn"><span class="fab fa-linkedin-in fa-2x" aria-hidden="true"></span></a>
      <a class="nav-item" href="https://twitter.com/intent/tweet?url=https%3a%2f%2fwww.free5gc.org%2finstallations%2fstage-3-configuration%2f&amp;text=" title="Tweet this"><span class="fab fa-twitter fa-2x"></span></a>
    </nav>
  </section>


  

  
  </footer>
  

</article> 



      
      <footer class="pt-4 my-md-5 pt-md-5 border-top">
        <div class="row">
          <div class="col-12 col-md">
	    <a href="https://www.free5gc.org"><img class="mb-2" src="/img/free5GC.png" alt="" height="32"></a>
            <small class="d-block mb-1 text-muted">&copy; Copyright January 2019 free5GC.org</small>
            <small class="d-block mb-1 text-muted">All rights reserved.</small>
          </div>
          <div class="col-6 col-md">
            <h5>Contact:</h5>
            <ul class="list-unstyled text-small">
              <li>
                <a class="link-secondary" href="mailto:free5GC.org@gmail.com"
                   target="_self"><span style="text-decoration:underline">free5GC.org@gmail.com</span>
                </a>
              </li>
            </ul>
	    The free5GC project is hosted by the<br>
            <a href="https://cslab.nctu.edu.tw/" target="_blank">Communication Service/Software Laboratory (CS Lab)</a>.
          </div>
        </div>
      </footer>
      
    </div> <!-- /.container-fluid -->
  </body>

</html>

